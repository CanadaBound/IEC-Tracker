{"ast":null,"code":"var _jsxFileName = \"/Users/danielnamyslaw/iec-tracker/Frontend/src/Components/Forms/EditROIForm.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { getAllCountryROI, getData } from '../../HelperFunctions';\nimport '../../CSS/Forms/EditROIForm.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction EditROIForm() {\n  _s();\n\n  const [showForm, setShowForm] = useState(false);\n  const [showROIList, setShowROIList] = useState(false);\n  const [initLoad, setInitLoad] = useState(true);\n  const [toggleEditForm, setToggleEditForm] = useState(false);\n  const [name, setName] = useState('');\n  const [candidates, setCandidates] = useState('');\n  const [permits, setPermits] = useState('');\n  const [invitations, setInvitations] = useState('');\n  const [date, setDate] = useState('');\n  const [searchValue, setSearchValue] = useState('');\n  const [selectedCountryROI, setSelectedCountryROI] = useState([]);\n  const [selectedCountry, setSelectedCountry] = useState([]);\n  const [originalCountryArr, setOriginalCountryArr] = useState([]);\n  const [countryArr, setCountryArr] = useState([]);\n  const [prevButton, setPrevButton] = useState();\n  const containerRef = useRef();\n\n  function toggleROIList(e, name) {\n    if (e.currentTarget.className === 'Edit-ROI-Selector-Button') {\n      setShowROIList(true);\n      e.currentTarget.className = 'Edit-ROI-Selector-Button-Active';\n      getAllCountryROI(name).then(res => {\n        setSelectedCountryROI(res.data);\n      });\n\n      if (prevButton !== null || typeof prevButton !== 'undefined') {\n        var localArr = containerRef.current.childNodes;\n\n        for (let i = 0; i < localArr.length; i++) {\n          if (localArr[i].id === prevButton) {\n            localArr[i].className = 'Edit-ROI-Selector-Button';\n          }\n        }\n      }\n\n      setPrevButton(e.currentTarget.id);\n    } else {\n      e.currentTarget.className = 'Edit-ROI-Selector-Button';\n      setSelectedCountryROI([]);\n      setShowROIList(false);\n    }\n  }\n\n  function editForm(e, roiData) {\n    if (e.currentTarget.className === 'Edit-ROI-Selector-Button') {\n      setToggleEditForm(true);\n      setCandidates(roiData.country_candidates);\n      setPermits(roiData.country_permits);\n      setInvitations(roiData.country_permits);\n      setDate(roiData.country_date);\n      e.currentTarget.className = 'Edit-ROI-Selector-Button-Active';\n\n      if (prevButton !== null || typeof prevButton !== 'undefined') {\n        var localArr = containerRef.current.childNodes;\n\n        for (let i = 0; i < localArr.length; i++) {\n          if (localArr[i].id === prevButton) {\n            localArr[i].className = 'Edit-ROI-Selector-Button';\n          }\n        }\n      }\n\n      setPrevButton(e.currentTarget.id);\n    } else {\n      e.currentTarget.className = 'Edit-ROI-Selector-Button';\n      setToggleEditForm(false);\n      setCandidates('');\n      setPermits('');\n      setInvitations('');\n      setDate('');\n    }\n  }\n\n  function handleBackButton() {\n    setShowROIList(false);\n    setSelectedCountryROI([]);\n    setSearchValue('');\n  }\n\n  function onUpdate(e, id) {\n    e.preventDefault();\n    axios.put(`roi/${id}`, {\n      country_candidates: candidates,\n      country_permits: permits,\n      country_invitations: invitations,\n      country_date: date\n    }).then(function (response) {\n      console.log(response);\n      setCandidates('');\n      setPermits('');\n      setInvitations('');\n      setDate('');\n      showForm(false);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  useEffect(() => {\n    if (initLoad) {\n      getData().then(res => {\n        setOriginalCountryArr(res.data);\n        setCountryArr(res.data);\n      });\n      setInitLoad(false);\n    }\n  }, []);\n  useEffect(() => {\n    if (!initLoad && !showROIList) {\n      if (searchValue.length === 0 || searchValue === null || typeof searchValue === 'undefined') {\n        var noSearchCopy = [...originalCountryArr];\n        setCountryArr(noSearchCopy);\n      } else {\n        var copyArr = [...originalCountryArr];\n        copyArr = copyArr.filter(country => country.country_name.toLowerCase().includes(searchValue.toLowerCase()));\n        setCountryArr(copyArr);\n      }\n    } else if (!initLoad && showROIList) {\n      if (searchValue.length === 0 || searchValue === null || typeof searchValue === 'undefined') {\n        console.log('no search text');\n        var noSearchCopyROI = [...selectedCountryROI];\n        setCountryArr(noSearchCopyROI);\n      } else {\n        var copyArrROI = [...selectedCountryROI];\n        copyArrROI = copyArrROI.filter(country => country.country_date.includes(searchValue));\n        setCountryArr(copyArrROI);\n      }\n    }\n  }, [searchValue]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"Edit-ROI-Title\",\n      children: \"Edit Round of Invitations\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Edit-ROI-Wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Edit-ROI-Country-Selector\",\n        ref: containerRef,\n        children: [showROIList && selectedCountryROI.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"No-Records-Message\",\n          children: \"No records found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 55\n        }, this) : null, showROIList ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"Back-Button\",\n          onClick: () => handleBackButton(),\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"24\",\n            height: \"24\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 20\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"search\",\n          placeholder: \"Search..\",\n          value: searchValue,\n          onChange: e => setSearchValue(e.target.value),\n          className: \"Edit-ROI-Country-Selector-Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 6\n        }, this), showROIList ? selectedCountryROI.map(roi => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"Edit-ROI-Selector-Button\",\n          id: roi._id,\n          onClick: e => editForm(e, roi),\n          children: roi.country_date\n        }, roi._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 36\n        }, this)) : countryArr.map(country => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"Edit-ROI-Selector-Button\",\n          id: country._id,\n          onClick: e => toggleROIList(e, country.country_name),\n          children: country.country_name\n        }, country.country_name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 32\n        }, this)), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"Edit-ROI-Form\",\n        children: toggleEditForm ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Candidates\",\n            value: candidates,\n            onChange: e => setCandidates(e.currentTarget.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Permits Left\",\n            value: permits,\n            onChange: e => setPermits(e.currentTarget.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Invitations\",\n            value: invitations,\n            onChange: e => setInvitations(e.currentTarget.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            placeholder: \"Date\",\n            value: date,\n            onChange: e => setDate(e.currentTarget.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            className: \"ROI-Submit-Button\",\n            onClick: e => onUpdate(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 6\n          }, this)]\n        }, void 0, true) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(EditROIForm, \"/t2kIsctdPdZWx1g5O5YppKZYdc=\");\n\n_c = EditROIForm;\nexport default EditROIForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditROIForm\");","map":{"version":3,"sources":["/Users/danielnamyslaw/iec-tracker/Frontend/src/Components/Forms/EditROIForm.js"],"names":["useState","useEffect","useRef","axios","getAllCountryROI","getData","EditROIForm","showForm","setShowForm","showROIList","setShowROIList","initLoad","setInitLoad","toggleEditForm","setToggleEditForm","name","setName","candidates","setCandidates","permits","setPermits","invitations","setInvitations","date","setDate","searchValue","setSearchValue","selectedCountryROI","setSelectedCountryROI","selectedCountry","setSelectedCountry","originalCountryArr","setOriginalCountryArr","countryArr","setCountryArr","prevButton","setPrevButton","containerRef","toggleROIList","e","currentTarget","className","then","res","data","localArr","current","childNodes","i","length","id","editForm","roiData","country_candidates","country_permits","country_date","handleBackButton","onUpdate","preventDefault","put","country_invitations","response","console","log","catch","error","noSearchCopy","copyArr","filter","country","country_name","toLowerCase","includes","noSearchCopyROI","copyArrROI","target","value","map","roi","_id"],"mappings":"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","sourcesContent":["import {useState, useEffect, useRef} from 'react';\nimport axios from 'axios';\nimport { getAllCountryROI, getData } from '../../HelperFunctions';\nimport '../../CSS/Forms/EditROIForm.css';\nfunction EditROIForm(){\n\n\tconst [showForm, setShowForm]= useState(false);\n\tconst [showROIList, setShowROIList] = useState(false);\n\tconst [initLoad, setInitLoad] = useState(true);\n\tconst [toggleEditForm, setToggleEditForm] = useState(false);\n\n\tconst [name, setName] = useState('');\n\tconst [candidates, setCandidates] = useState('');\n\tconst [permits, setPermits] = useState('');\n\tconst [invitations, setInvitations] = useState('');\n\tconst [date, setDate] = useState('');\n\tconst [searchValue, setSearchValue] = useState('');\n\tconst [selectedCountryROI, setSelectedCountryROI] = useState([]);\n\n\tconst [selectedCountry, setSelectedCountry] = useState([]);\n\tconst [originalCountryArr, setOriginalCountryArr]= useState([]);\n\tconst [countryArr, setCountryArr] = useState([]);\n\n\tconst [prevButton, setPrevButton] = useState();\n\n\tconst containerRef = useRef();\n\n\tfunction toggleROIList(e, name){\n\t\t\n\t\tif(e.currentTarget.className === 'Edit-ROI-Selector-Button'){\n\t\t\tsetShowROIList(true);\n\t\t\te.currentTarget.className = 'Edit-ROI-Selector-Button-Active';\n\t\t\tgetAllCountryROI(name).then(res=>{\n\t\t\t\tsetSelectedCountryROI(res.data);\n\t\t\t\t\n\t\t\t})\n\t\t\tif(prevButton !== null || typeof prevButton !== 'undefined'){\n\t\t\t\tvar localArr = containerRef.current.childNodes;\n\t\t\t\tfor(let i=0; i <localArr.length; i++){\n\t\t\t\t\tif(localArr[i].id === prevButton){\n\t\t\t\t\t\tlocalArr[i].className = 'Edit-ROI-Selector-Button';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tsetPrevButton(e.currentTarget.id);\n\t\t}\n\t\telse{\n\t\t\te.currentTarget.className = 'Edit-ROI-Selector-Button';\n\t\t\tsetSelectedCountryROI([]);\n\t\t\tsetShowROIList(false);\n\t\t}\n\t}\n\n\tfunction editForm(e, roiData){\n\t\t\n\t\tif(e.currentTarget.className === 'Edit-ROI-Selector-Button'){\n\t\t\tsetToggleEditForm(true);\n\t\t\tsetCandidates(roiData.country_candidates);\n\t\t\tsetPermits(roiData.country_permits);\n\t\t\tsetInvitations(roiData.country_permits);\n\t\t\tsetDate(roiData.country_date);\n\t\t\te.currentTarget.className = 'Edit-ROI-Selector-Button-Active';\n\t\t\tif(prevButton !== null || typeof prevButton !== 'undefined'){\n\t\t\t\tvar localArr = containerRef.current.childNodes;\n\t\t\t\tfor(let i=0; i <localArr.length; i++){\n\t\t\t\t\tif(localArr[i].id === prevButton){\n\t\t\t\t\t\tlocalArr[i].className = 'Edit-ROI-Selector-Button';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tsetPrevButton(e.currentTarget.id);\n\t\t}\n\t\telse{\n\t\t\te.currentTarget.className = 'Edit-ROI-Selector-Button';\n\t\t\tsetToggleEditForm(false);\n\t\t\tsetCandidates('');\n\t\t\tsetPermits('');\n\t\t\tsetInvitations('');\n\t\t\tsetDate('');\n\t\t}\n\t}\n\t\n\n\tfunction handleBackButton(){\n\t\tsetShowROIList(false);\n\t\tsetSelectedCountryROI([]);\n\t\tsetSearchValue('');\n\t}\n\n\tfunction onUpdate(e,id){\n\t\te.preventDefault();\n\n\t\taxios.put(`roi/${id}`, {\n    \t\tcountry_candidates: candidates,\n    \t\tcountry_permits: permits,\n    \t\tcountry_invitations: invitations,\n    \t\tcountry_date: date\n\t\t  })\n\t\t  .then(function (response) {\n\t\t\tconsole.log(response);\n\t\t\tsetCandidates('');\n\t\t\tsetPermits('');\n\t\t\tsetInvitations('');\n\t\t\tsetDate('');\n\t\t\tshowForm(false);\n\t\t  })\n\t\t  .catch(function (error) {\n\t\t\tconsole.log(error);\n\t\t  });\n\t}\n\n\tuseEffect(()=>{\n\t\tif(initLoad){\n\t\t\tgetData().then(res=>{\n\t\t\t\tsetOriginalCountryArr(res.data);\n\t\t\t\tsetCountryArr(res.data);\n\t\n\t\t\t})\n\t\t\t\n\t\t\tsetInitLoad(false);\t\n\t\t\t\n\t\t}\n\t},[]);\n\n\tuseEffect(()=>{\n\t\t\n\t\tif(!initLoad && !showROIList){\n\t\t\tif(searchValue.length === 0 || searchValue === null || typeof searchValue === 'undefined'){\n\t\t\n\t\t\t\tvar noSearchCopy = [...originalCountryArr];\n\t\t\t\tsetCountryArr(noSearchCopy);\n\t\t\t}else{\n\t\t\t\tvar copyArr = [...originalCountryArr];\n\t\t\t\tcopyArr = copyArr.filter(country=>country.country_name.toLowerCase().includes(searchValue.toLowerCase()));\n\t\t\t\n\t\t\t\tsetCountryArr(copyArr);\n\n\t\t\t}\n\t\t}else if(!initLoad && showROIList){\n\t\t\tif(searchValue.length === 0 || searchValue === null || typeof searchValue === 'undefined'){\n\t\t\t\tconsole.log('no search text');\t\t\t\n\t\t\t\tvar noSearchCopyROI = [...selectedCountryROI];\n\t\t\t\tsetCountryArr(noSearchCopyROI);\n\t\t\t}else{\n\t\t\t\tvar copyArrROI = [...selectedCountryROI];\n\t\t\t\tcopyArrROI = copyArrROI.filter(country=>country.country_date.includes(searchValue));\n\t\t\t\n\t\t\t\tsetCountryArr(copyArrROI);\n\n\t\t\t}\n\t\t}\n\t\t\n\t},[searchValue])\n\n\n\treturn(\n\t\t<>\n\t\t\t<h1 className='Edit-ROI-Title'>Edit Round of Invitations</h1>\n\t\t\t<div className=\"Edit-ROI-Wrapper\">\n\t\t\t\t<div className='Edit-ROI-Country-Selector' ref={containerRef}>\n\t\t\t\t\t{showROIList && selectedCountryROI.length === 0? <p className='No-Records-Message'>No records found</p>:null}\n\t\t\t\t\t{showROIList? <button className='Back-Button' onClick={()=>handleBackButton()}>\n\t\t\t\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t<path d=\"M16.67 0l2.83 2.829-9.339 9.175 9.339 9.167-2.83 2.829-12.17-11.996z\"/>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</button>:null}\n\t\t\t\t\t<input type=\"search\" placeholder=\"Search..\" value={searchValue} onChange={(e)=>setSearchValue(e.target.value)} className='Edit-ROI-Country-Selector-Search'/>\n\t\t\t\t\t {showROIList?\n\t\t\t\t\t selectedCountryROI.map(roi=> <button key ={roi._id} className='Edit-ROI-Selector-Button' id={roi._id} onClick={(e)=>editForm(e, roi)}>{roi.country_date}</button>):\n\t\t\t\t\t countryArr.map(country=> <button key ={country.country_name} className='Edit-ROI-Selector-Button' id={country._id} onClick={(e)=>toggleROIList(e, country.country_name)}>{country.country_name}</button>)}:\n\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t <form className='Edit-ROI-Form'>\n\n\t\t\t\t\t{toggleEditForm?<>\n\t\t\t\t \t<input type=\"text\" placeholder='Candidates' value={candidates} onChange={(e)=>setCandidates(e.currentTarget.value)}/>\n\t\t\t\t\t<input type=\"text\" placeholder='Permits Left' value={permits} onChange={(e)=>setPermits(e.currentTarget.value)}/>\n\t\t\t\t\t<input type=\"text\" placeholder='Invitations' value={invitations} onChange={(e)=>setInvitations(e.currentTarget.value)}/>\n\t\t\t\t\t<input type=\"date\" placeholder='Date' value={date} onChange={(e)=>setDate(e.currentTarget.value)}/>\n\t\t\t\t\t<input type=\"submit\" className='ROI-Submit-Button' onClick={(e)=>onUpdate(e)}/>\n\t\t\t\t\t</>:null}\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</>\n\n\t);\n\n}\nexport default EditROIForm;"]},"metadata":{},"sourceType":"module"}